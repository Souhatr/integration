<div class="container mt-3">
  <h3>RÃ©servations (admin)</h3>
  <div class="mb-2 d-flex gap-2">
    <input class="form-control" placeholder="Filtrer par lieu, utilisateur ou id" [(ngModel)]="filter" (ngModelChange)="buildDisplay()" />
  </div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Utilisateur</th>
        <th>Lieu</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of displayed">
        <td>{{ r.idR }}</td>
        <td>
          <a *ngIf="r.user" [routerLink]="['/users', r.user.idU]">{{ r.user.username || (r.user.nom + ' ' + r.user.prenom) }}</a>
          <small *ngIf="!r.user">(<a [routerLink]="['/users', r.idU]">user {{ r.idU }}</a>)</small>
        </td>
        <td>
          <a *ngIf="r.lieu" [routerLink]="['/lieux', r.lieu.idL]">{{ r.lieu.nom }}</a>
          <small *ngIf="!r.lieu">(lieu {{ r.idL }})</small>
        </td>
        <td>{{ r.dateReservation }}</td>
        <td><button class="btn btn-sm btn-danger" (click)="delete(r.idR)">Supprimer</button></td>
      </tr>
    </tbody>
  </table>
</div>
